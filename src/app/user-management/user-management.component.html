<div>
  <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">新建</button>
  <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal1"
    (click)="deletemore()" [disabled]="userlist.length===0">批量删除</button>
</div>


<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog ">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">新建User</h4>
      </div>
      <div class="modal-body">
        <form role="form">
          <div class="form-group">
            <label for="firstname" class="col-sm-2 control-label">用户名</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" id="firstname" placeholder="请输入名字" [(ngModel)]="user.username"
                name="username" #username="ngModel">
            </div>
          </div>
          <div class="form-group">
            <label for="mima" class="col-sm-2 control-label">密码</label>
            <div class="col-sm-9">
              <input type="password " class="form-control" id="mima" placeholder="请输入密码" [(ngModel)]="user.password"
                name="password" #password="ngModel">
            </div>
          </div>
          <div class="form-group">
            <label for="mima" class="col-sm-2 control-label">确认密码</label>
            <div class="col-sm-9">
              <input type="password " class="form-control" id="mima" placeholder="请确认密码" [(ngModel)]="user.password"
                name="password" #password="ngModel">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" for="name">权限</label>
            <div class="col-sm-9">
              <select class="form-control" [(ngModel)]="user.role" name="role" #password="ngModel">
                <option>操作员</option>
                <option>管理员</option>

              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" for="name">邮箱</label>
            <form role="form" class="col-sm-9">
              <div class="form-group ">
                <input type="email" class="form-control" id="youxiang" [(ngModel)]="user.email" name="email"
                  #email="ngModel">
              </div>
            </form>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" for="names">别名</label>
            <form role="form" class="col-sm-9">
              <div class="form-group ">
                <input type="text" class="form-control" id="names" [(ngModel)]="user.name" name="name" #name="ngModel">
              </div>
            </form>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" id="addUserDialogCloseButton"data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary" (click)="add()">提交更改</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal -->
</div>


<form (ngSubmit)="onSumbit()" #taskForm="ngForm" *ngIf="userForEdit">
  <!-- 模态框（Modal） -->
  <div class="modal fade" id="myModal5" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog ">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="myModalLabe2">编辑用户</h4>
        </div>
        <div class="modal-body"style="height:250px">
          <form role="form">
            <div class="form-group">
              <label for="username" class="col-sm-2 control-label">用户名</label>
              <div class="col-sm-9">
                <label type="text" [(ngModel)]="userForEdit.username" name="username" #username="ngModel"
                  ngDefaultControl aria-readonly="true">{{userForEdit.username}}</label>
              </div>
            </div>
            <div class="form-group">
              <label for="password" class="col-sm-2 control-label">密码</label>
              <div class="col-sm-9">
                <input type="password" [(ngModel)]="userForEdit.password" name="password" #password="ngModel"
                  ngDefaultControl required>
              </div>
            </div>
            <div class="form-group">
              <label for="password" class="col-sm-2 control-label">确认密码</label>
              <div class="col-sm-9">
                <input type="password" [(ngModel)]="userForEdit.password" name="password" #password="ngModel"
                  ngDefaultControl required>
              </div>
            </div>
            <div class="form-group">
              <label for="role" class="col-sm-2 control-label">权限</label>
              <div class="col-sm-9">
                <select [(ngModel)]="userForEdit.role" name="role" #role="ngModel" ngDefaultControl required class="form-control"style="width:173px">
                  <option>操作员</option>
                  <option>管理员</option>
                </select>
              </div>
            </div>
            <div class="form-group ">
              <label for="email" class="col-sm-2 control-label">邮箱</label>
              <div class="col-sm-9">
                <div class="form-group">
                  <input type="email" [(ngModel)]="userForEdit.email" name="email" #email="ngModel" ngDefaultControl>
                </div>
              </div>
            </div>
          
            <div class="form-group">
              <label for="name" class="col-sm-2 control-label">别名</label>
              <form role=div class="col-sm-9">
                <div class="form-group">
                  <input type="text" [(ngModel)]="userForEdit.name" name="name" #name="ngModel" ngDefaultControl>
                </div>
              </form>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal"id="aaa">关闭</button>
          <button type="button" class="btn btn-primary" (click)="updateUser(userForEdit)">提交更改</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal -->
  </div>
</form>
<table class="table table-hover ">
  <thead >
    <tr>
      <th><input type="checkbox" id="selectedAll" [(ngModel)]="selectsAll" (change)="selectAll()"></th>
      <th scope="col">用户名<button class="btn btn-default but"><i class="iconfont">&#xe600;</i></button></th>
      <th scope="col">别名<button class="btn btn-default but" (click)="nicknameorder()"><i
            class="iconfont">&#xe600;</i></button></th>
      <th scope="col">权限</th>
      <th scope="col">邮箱</th>
      <th scope="col">操作</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users; let i = index">
      <td><label><input type="checkbox" class="user" [(ngModel)]="user.selected" (click)="ggg(i,user)"></label></td>
      <td>{{user.username}}</td>
      <td>{{user.name}}</td>
      <td>{{user.role}}</td>
      <td>{{user.email}}</td>
      <td><button class="btn btn-default but" (click)="getUser(user.id)" data-target="#myModal5" data-toggle="modal"
          name="name" ngDefaultControl><i class="iconfont">&#xe601;</i></button>
        &nbsp;&nbsp;&nbsp;<button class="btn btn-default but" (click)="delete(user)"><i
            class="iconfont">&#xe62b;</i></button></td>
    </tr>
  </tbody>
</table>
<div class="text-right margin-bottom" *ngIf="pageParams.totalPage>=1&&pageParams.totalNum>0">
  <div class="pull-left text-sm" >总计{{pageParams.totalNum}}条，第{{pageParams.curPage}}/{{pageParams.totalPage}}页</div>
  <select [(ngModel)]="pageParams.pageSize"name="pageSize" (change)="setPage()">
    <option value="2">2</option> <!--双向绑定取pageSize-->
    <option value="10">10</option>
    <option value="20">20 </option>
  </select>

  <button class="btn btn-primary next" [disabled]="pageParams.curPage==1"(click)="previousPage()">上一页</button>
  <button class="btn btn-primary " [disabled]="pageParams.curPage==pageParams.pageNo"
    *ngFor="let page of getPageList(pageParams)"(click)="changeCurrentPage(page.pageNo)">{{page.pageNo}}</button>
  <button class="btn btn-primary " [disabled]="pageParams.curPage==pageParams.totalPage"(click)="nextPage()"> 下一页</button>

</div>